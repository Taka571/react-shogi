(this["webpackJsonpreact-shogi"]=this["webpackJsonpreact-shogi"]||[]).push([[0],{31:function(e,t,a){},50:function(e,t,a){e.exports=a(62)},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),c=a.n(i),s=(a(31),a(4)),o=function e(){Object(s.a)(this,e)};o.LENGTH=9,o.UNCLICKED=95,o.WHITE=7,o.MT=16,o.PIECES=["\u98db","\u89d2","\u91d1","\u9280","\u6842","\u9999","\u6b69","\u7389","\u7adc","\u99ac","","\u5168","\u572d","\u674f","\u3068",""],o.NUM=["","","\u30cb","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c","\u5341\u4e09","\u5341\u56db","\u5341\u4e94","\u5341\u516d","\u5341\u4e03","\u5341\u516b"];var l=a(13),u=a(7),p=a(8),E=a(15),h=a(9),_=function(){function e(t,a,n){Object(s.a)(this,e),this._out=void 0,this._turn=void 0,this._piece_num=void 0,this._out=t,this._turn=a,this._piece_num=n}return Object(l.a)(e,[{key:"out",value:function(){return this._out}},{key:"turn",value:function(){return this._turn}},{key:"piece_num",value:function(){return this._piece_num}},{key:"promote",value:function(){this._piece_num+=o.MT/2,this._out=o.PIECES[this._piece_num]}}]),e}(),m=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),v=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),f=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),d=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),T=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),H=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),N=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),b=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,o.PIECES[a],e,a))}return Object(h.a)(t,e),t}(_),k=function(e){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this," ",e,a))}return Object(h.a)(t,e),t}(_);function L(e){var t="";return e.is_captured?t="captured":(t="square piece",e.is_black||(t+=" white")),e.is_final&&(t+=" final"),e.is_clicked&&(t+=" click"),e.can_control&&(t+=" attack"),r.a.createElement("button",{className:t,onClick:e.onClick},e.value)}var G=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderSquare",value:function(e,t,a,n){var i=this,c=n-2*o.WHITE,s=Math.floor(c/o.LENGTH),l=c%o.LENGTH;return r.a.createElement(L,{key:n,is_final:e,is_clicked:t,value:this.props.squares[s][l].out(),is_black:this.props.squares[s][l].turn(),is_captured:!1,can_control:a,onClick:function(){return i.props.onClick(n)}})}},{key:"content",value:function(e){for(var t=[],a=o.LENGTH-1;a>=0;--a)this.props.control_piece[a][e]?t.push(this.renderSquare(!1,!1,!0,a*o.LENGTH+e+2*o.WHITE)):a*o.LENGTH+e===this.props.final_piece-2*o.WHITE?t.push(this.renderSquare(!0,!1,!1,a*o.LENGTH+e+2*o.WHITE)):a*o.LENGTH+e===this.props.clicked_piece-2*o.WHITE?t.push(this.renderSquare(!1,!0,!1,a*o.LENGTH+e+2*o.WHITE)):t.push(this.renderSquare(!1,!1,!1,a*o.LENGTH+e+2*o.WHITE));return t}},{key:"render",value:function(){for(var e=new Array,t=0;t<o.LENGTH;++t)e=e.concat(r.a.createElement("div",{className:"board-row ley",key:t},this.content(t)));return r.a.createElement("div",null,e)}}]),t}(r.a.Component),w=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderSquare",value:function(e,t){var a=this;return r.a.createElement(L,{key:t,is_final:!1,is_clicked:e,value:o.PIECES[t],is_black:this.props.is_black,is_captured:!0,can_control:!1,onClick:this.props.is_black?function(){return a.props.onClick(t)}:function(){return a.props.onClick(t+o.WHITE)}})}},{key:"render",value:function(){for(var e=new Array,t=this.props.turn?this.props.clicked_piece:this.props.clicked_piece-o.WHITE,a=this.props.is_black,n=this.props.turn,i=0;i<o.WHITE;++i){var c=this.props.squares[i];c>0&&(e=i===t&&a===n?e.concat(r.a.createElement("div",{className:"board-row ley",key:i},this.renderSquare(!0,i))):e.concat(r.a.createElement("div",{className:"board-row ley",key:i},this.renderSquare(!1,i))),c>1&&(e=e.concat(r.a.createElement("div",{className:"board-row ley",key:"num"+i},r.a.createElement("button",{className:"number"},o.NUM[c])))))}return r.a.createElement("div",null,e)}}]),t}(r.a.Component),C=a(12),I=a.n(C),g=a(85),y=a(84),O=a(83),j=a(81),S=a(82),W=a(80);function P(e){return r.a.createElement("div",null,r.a.createElement(y.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(W.a,{id:"alert-dialog-title"},e.title),r.a.createElement(j.a,null,r.a.createElement(S.a,{id:"alert-dialog-description"},e.message)),r.a.createElement(O.a,null,r.a.createElement(g.a,{onClick:e.handleYes,color:"primary"},"\u306f\u3044"),r.a.createElement(g.a,{onClick:e.handleNo,color:"primary"},"\u3044\u3044\u3048"))))}function D(e){return r.a.createElement("div",null,r.a.createElement(y.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(W.a,{id:"alert-dialog-title"},e.title),r.a.createElement(j.a,null,r.a.createElement(S.a,{id:"alert-dialog-description",style:{whiteSpace:"pre-line"}},e.message)),r.a.createElement(O.a,null,r.a.createElement(g.a,{onClick:e.handleClose,color:"primary"},"OK"))))}var M=a(34),A=a.n(M),K=a(33),U=a.n(K),q=a(32),B=a.n(q),x=a(35),R=a.n(x);function z(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],[]),a=0;a<o.LENGTH;++a){t[a]=[];for(var n=0;n<o.LENGTH;++n)t[a].push(new k)}if("lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1"===e){for(var r=0;r<o.LENGTH;++r)t[r][2]=new m(!1),t[r][6]=new m(!0);t[0][0]=new v(!1),t[8][0]=new v(!1),t[0][8]=new v(!0),t[8][8]=new v(!0),t[1][0]=new f(!1),t[7][0]=new f(!1),t[1][8]=new f(!0),t[7][8]=new f(!0),t[2][0]=new d(!1),t[6][0]=new d(!1),t[2][8]=new d(!0),t[6][8]=new d(!0),t[3][0]=new T(!1),t[5][0]=new T(!1),t[3][8]=new T(!0),t[5][8]=new T(!0),t[1][1]=new H(!1),t[7][7]=new H(!0),t[7][1]=new N(!1),t[1][7]=new N(!0),t[4][0]=new b(!1),t[4][8]=new b(!0)}return t}function Y(e,t){var a=new k;return 0===e&&(a=new N(t)),1===e&&(a=new H(t)),2===e&&(a=new T(t)),3===e&&(a=new d(t)),4===e&&(a=new f(t)),5===e&&(a=new v(t)),6===e&&(a=new m(t)),a}function J(){return new Array(o.WHITE).fill(0)}function F(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],a=0;a<o.LENGTH;++a)t[a]=new Array(o.LENGTH).fill(e);return t}function Q(e,t,a,n,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=t[n][r].piece_num();if(6!==l)if(2===l||3===l||4===l||7===l||11<=l&&l<=14){var u,p;4===l?(u=new Array(-1,1),p=new Array(-2,-2)):3===l?(u=new Array(-1,0,1,1,-1),p=new Array(-1,-1,-1,1,1)):2===l||11<=l&&l<=14?(u=new Array(-1,0,1,1,0,-1),p=new Array(-1,-1,-1,0,1,0)):s?(u=new Array(-1,0,1,1,1,0,-1,-1),p=new Array(-1,-1,-1,0,1,1,1,0)):(u=new Array(0),p=new Array(0));for(var E=0;E<u.length;++E){var h=a?n+u[E]:n-u[E],_=a?r+p[E]:r-p[E];0<=h&&h<o.LENGTH&&0<=_&&_<o.LENGTH&&(++e[h][_],h===i&&_===c&&(e[o.LENGTH][0]=n*o.LENGTH+r,e[o.LENGTH][1]=l))}}else if(5!==l)if(1!==l&&9!==l)if(0!==l&&8!==l);else{for(var m=new Array(0,1,0,-1),v=new Array(-1,0,1,0),f=0;f<m.length;++f)for(var d=n+m[f],T=r+v[f];0<=d&&d<o.LENGTH&&0<=T&&T<o.LENGTH&&(++e[d][T],d===i&&T===c&&(e[o.LENGTH][0]=n*o.LENGTH+r,e[o.LENGTH][1]=l),t[d][T].piece_num()===o.MT||7===t[d][T].piece_num()&&t[d][T].turn()!==a);)d+=m[f],T+=v[f];if(8===l){m=new Array(-1,1,1,-1),v=new Array(-1,-1,1,1);for(var H=0;H<m.length;++H){var N=n+m[H],b=r+v[H];0<=N&&N<o.LENGTH&&0<=b&&b<o.LENGTH&&(++e[N][b],N===i&&b===c&&(e[o.LENGTH][0]=n*o.LENGTH+r,e[o.LENGTH][1]=l))}}}else{for(var k=new Array(-1,1,1,-1),L=new Array(-1,-1,1,1),G=0;G<k.length;++G)for(var w=n+k[G],C=r+L[G];0<=w&&w<o.LENGTH&&0<=C&&C<o.LENGTH&&(++e[w][C],w===i&&C===c&&(e[o.LENGTH][0]=n*o.LENGTH+r,e[o.LENGTH][1]=l),t[w][C].piece_num()===o.MT||7===t[w][C].piece_num()&&t[w][C].turn()!==a);)w+=k[G],C+=L[G];if(9===l){k=new Array(0,1,0,-1),L=new Array(-1,0,1,0);for(var I=0;I<k.length;++I){var g=n+k[I],y=r+L[I];0<=g&&g<o.LENGTH&&0<=y&&y<o.LENGTH&&(++e[g][y],g===i&&y===c&&(e[o.LENGTH][0]=n*o.LENGTH+r,e[o.LENGTH][1]=l))}}}else for(var O=-1,j=a?r+O:r-O;0<=j&&j<o.LENGTH&&(++e[n][j],n===i&&j===c&&(e[o.LENGTH][0]=n*o.LENGTH+r,e[o.LENGTH][1]=l),t[n][j].piece_num()===o.MT||7===t[n][j].piece_num()&&t[n][j].turn()!==a);)j=a?j+O:j-O;else if(a?0!==r:r!==o.LENGTH-1){var S=a?r-1:r+1;++e[n][S],n===i&&S===c&&(e[o.LENGTH][0]=n*o.LENGTH+r,e[o.LENGTH][1]=l)}}function V(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=[],l=0;l<o.LENGTH+1;++l)s[l]=new Array(o.LENGTH).fill(0);if(-1!==a)return Q(s,e,t,a,n),s;for(var u=0;u<o.LENGTH;++u)for(var p=0;p<o.LENGTH;++p)e[u][p].piece_num()!==o.MT&&e[u][p].turn()===t&&Q(s,e,t,u,p,r,i,c);return s}function X(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(-1===a)for(var r=0;r<o.LENGTH;++r)for(var i=0;i<o.LENGTH;++i)if(7===e[r][i].piece_num()&&e[r][i].turn()===t){a=r,n=i,r=o.LENGTH,i=o.LENGTH;break}var c=V(e,!t,-1,-1,a,n),s=c[a][n];return s>0}function Z(e,t,a){for(var n=I.a.cloneDeep(e),r=-1,i=-1,c=0;c<o.LENGTH;++c)for(var s=0;s<o.LENGTH;++s)if(7===n[c][s].piece_num()&&n[c][s].turn()===a){r=c,i=s,c=o.LENGTH,s=o.LENGTH;break}var l=V(n,!a,-1,-1,r,i),u=l[r][i];if(0===u)return!1;for(var p=new Array(1,1,0,-1,-1,-1,0,1),E=new Array(0,1,1,1,0,-1,-1,-1),h=0;h<p.length;++h){var _=r+p[h],m=i+E[h];if(!(_<0||o.LENGTH<=_||m<0||o.LENGTH<=m)&&((n[_][m].piece_num()===o.MT||n[_][m].turn()!==a)&&0===l[_][m]))return!1}if(u>1)return!0;for(var v=l[o.LENGTH][0],f=Math.floor(v/o.LENGTH),d=v%o.LENGTH,T=l[o.LENGTH][1],H=n[f][d],N=0;N<o.LENGTH;++N)for(var b=0;b<o.LENGTH;++b)if(n[N][b].turn()===a&&n[N][b].piece_num()!==o.MT&&7!==n[N][b].piece_num()){var L=V(n,a,N,b);if(L[f][d]){if(n[f][d]=n[N][b],n[N][b]=new k,!X(n,a,r,i))return!1;n[N][b]=n[f][d],n[f][d]=H}if(0===T||1===T||5===T||8===T||9===T){var G=f-r,w=d-i;0!==G&&(G/=Math.abs(G)),0!==w&&(w/=Math.abs(w));for(var C=r+G,g=i+w;C!==f||g!==d;){if(L[C][g]>0){if(n[C][g]=n[N][b],n[N][b]=new k,!X(n,a,r,i))return!1;n[N][b]=n[C][g],n[C][g]=new k}C+=G,g+=w}}}if(0===T||1===T||5===T||8===T||9===T){var y=f-r,O=d-i;0!==y&&(y/=Math.abs(y)),0!==O&&(O/=Math.abs(O));for(var j=r+y,S=i+O;j!==f||S!==d;){for(var W=0;W<o.WHITE;++W)if(0!==t[W]){if(n[j][S]=Y(W,a),$(e,n,t,-1,-1,j,S,a)){if(6===W&&ee(n,j,a)){n[j][S]=new k;continue}return!1}n[j][S]=new k}j+=y,S+=O}}return!0}function $(e,t,a,n,r,i,c,s){var l=t[i][c].piece_num();return-1===n?4===l?s?c>1:c<o.LENGTH-1-1:5===l?s?0!==c:c!==o.LENGTH-1:6!==l||(s?0!==c:c!==o.LENGTH-1)&&!Z(t,a,!s):V(e,s,n,r)[i][c]>0}function ee(e,t,a){for(var n=0,r=0;r<o.LENGTH;++r)6===e[t][r].piece_num()&&e[t][r].turn()===a&&++n;return n>=2}var te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={start_pos:a.props.start_pos,start_black_piece:a.props.start_black_piece,start_white_piece:a.props.start_white_piece,current_pos:a.props.current_pos,current_black_piece:a.props.current_black_piece,current_white_piece:a.props.current_white_piece,control_piece:a.props.control_piece,kifu:a.props.kifu,turn:a.props.turn,moves:a.props.moves,moves_sub:a.props.moves_sub,moves_max:a.props.moves_max,clicked_piece:a.props.clicked_piece,final_piece:a.props.final_piece,black_name:a.props.black_name,white_name:a.props.white_name,is_black:a.props.is_black,moved_piece:a.props.moves,promotion:a.props.promotion,resign:a.props.resign,result:a.props.result},a.handlePromotion=a.handlePromotion.bind(Object(E.a)(a)),a.handleResign=a.handleResign.bind(Object(E.a)(a)),a.handleResultClose=a.handleResultClose.bind(Object(E.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){var t=this;if(!(this.state.moves<0)){var a=this.state.clicked_piece,n=this.state.turn,r=I.a.cloneDeep(this.state.current_pos),i=I.a.cloneDeep(this.state.current_black_piece),c=I.a.cloneDeep(this.state.current_white_piece);if(e<2*o.WHITE){if(a===o.UNCLICKED){if(n?e<o.WHITE&&i[e]>0:e>=o.WHITE&&c[e-o.WHITE]>0){for(var s=F(!0),l=e>=o.WHITE?e-o.WHITE:e,u=0;u<o.LENGTH;++u)for(var p=0;p<o.LENGTH;++p)r[u][p].piece_num()!==o.MT?s[u][p]=!1:4===l?s[u][p]=n?p>1:p<o.LENGTH-1-1:5===l?s[u][p]=n?0!==p:p!==o.LENGTH-1:6===l&&(s[u][p]=n?0!==p:p!==o.LENGTH-1,r[u][p]=Y(l,n),ee(r,u,n)&&(s[u][p]=!1),(n?p>1&&7===r[u][p-1].piece_num()&&r[u][p-1].turn()!==n:p<o.LENGTH-1&&7===r[u][p+1].piece_num()&&r[u][p+1].turn()!==n)&&Z(r,n?c:i,!n)&&(s[u][p]=!1),r[u][p]=new k),s[u][p]&&(r[u][p]=Y(l,n),s[u][p]=!X(r,n),r[u][p]=new k);this.setState({control_piece:s,clicked_piece:e})}return}this.setState({clicked_piece:o.UNCLICKED,control_piece:F()})}else{var E=Math.floor((e-2*o.WHITE)/o.LENGTH),h=(e-2*o.WHITE)%o.LENGTH,_=this.state.current_pos.concat();if(this.state.clicked_piece!==o.UNCLICKED){if(this.state.control_piece[E][h]){var m=this.state.moves,v=I.a.cloneDeep(i),f=I.a.cloneDeep(c),d=-1,T=-1;if(a<2*o.WHITE)n?(--v[a],r[E][h]=Y(a,n)):(--f[a-o.WHITE],r[E][h]=Y(a-o.WHITE,n));else{d=Math.floor((a-2*o.WHITE)/o.LENGTH),T=(a-2*o.WHITE)%o.LENGTH;var H=r[E][h];r[E][h]=r[d][T],r[d][T]=new k;var N=H.piece_num();N!==o.MT&&(N>o.WHITE&&(N-=o.MT/2),n?++v[N]:++f[N])}var b=r[E][h].piece_num(),L=!1;if(!(-1!==d&&(n?h<3||T<3:h>o.LENGTH-1-3||T>o.LENGTH-1-3)&&b<o.WHITE&&""!==o.PIECES[b+o.MT/2])||(5<=b&&b<=6?(n?0===h:h===o.LENGTH-1)&&(r[E][h].promote(),L=!0):4===b&&(n?h<2:h>o.LENGTH-1-2)&&(r[E][h].promote(),L=!0),L)){var G=this.state.kifu;return G=(G=G.concat(a)).concat(L?e+o.LENGTH*o.LENGTH:e),this.setState({current_pos:r,current_black_piece:v,current_white_piece:f,control_piece:F(),kifu:G,turn:!n,moves:m+1,moves_sub:m+1,clicked_piece:o.UNCLICKED,final_piece:e}),Z(r,n?f:v,!n)?(setTimeout((function(){t.setState({result:!0})}),200),void this.setState({moves:-1,moves_max:m+1})):void 0}this.setState({moved_piece:e,promotion:!0})}else this.setState({control_piece:F(),clicked_piece:o.UNCLICKED})}else{if(_[E][h].piece_num()===o.MT||_[E][h].turn()!==n)return;for(var w=V(_,n,E,h,-1,-1,!1),C=F(!1),g=0;g<o.LENGTH;++g)for(var y=0;y<o.LENGTH;++y)if(0!==w[g][y]&&(_[g][y].piece_num()===o.MT||_[g][y].turn()!==n)){var O=r[g][y];r[g][y]=r[E][h],r[E][h]=new k,C[g][y]=!X(r,n),r[E][h]=r[g][y],r[g][y]=O}this.setState({control_piece:C,clicked_piece:e})}}}}},{key:"resign",value:function(){this.state.moves<0||this.setState({resign:!0})}},{key:"rotate",value:function(){this.setState({is_black:!this.state.is_black,clicked_piece:o.UNCLICKED,control_piece:F()})}},{key:"handlePromotion",value:function(e){var t=this,a=this.state.clicked_piece,n=this.state.turn,r=I.a.cloneDeep(this.state.current_pos),i=I.a.cloneDeep(this.state.current_black_piece),c=I.a.cloneDeep(this.state.current_white_piece),s=this.state.moves,l=I.a.cloneDeep(i),u=I.a.cloneDeep(c),p=-1,E=-1,h=this.state.moved_piece,_=Math.floor((h-2*o.WHITE)/o.LENGTH),m=(h-2*o.WHITE)%o.LENGTH;if(a<2*o.WHITE)n?(--l[a],r[_][m]=Y(a,n)):(--u[a-o.WHITE],r[_][m]=Y(a-o.WHITE,n));else{p=Math.floor((a-2*o.WHITE)/o.LENGTH),E=(a-2*o.WHITE)%o.LENGTH;var v=r[_][m];r[_][m]=r[p][E],r[p][E]=new k;var f=v.piece_num();f!==o.MT&&(f>o.WHITE&&(f-=o.MT/2),n?++l[f]:++u[f])}e&&r[_][m].promote();var d=this.state.kifu;if(d=(d=d.concat(a)).concat(e?h+o.LENGTH*o.LENGTH:h),this.setState({current_pos:r,current_black_piece:l,current_white_piece:u,control_piece:F(),kifu:d,turn:!n,moves:s+1,moves_sub:s+1,clicked_piece:o.UNCLICKED,final_piece:h,moved_piece:o.UNCLICKED,promotion:!1}),Z(r,n?u:l,!n))return setTimeout((function(){t.setState({result:!0})}),200),void this.setState({moves:-1,moves_max:s+1})}},{key:"handleResign",value:function(e){var t=this,a=this.state.moves;e?(setTimeout((function(){t.setState({result:!0})}),200),this.setState({moves:-1,moves_max:a,clicked_piece:o.UNCLICKED,control_piece:F(),resign:!1})):this.setState({resign:!1})}},{key:"handleResultClose",value:function(){this.setState({result:!1})}},{key:"setBoard",value:function(e){e<0&&(e=0),e>this.state.moves_max&&(e=this.state.moves_max);for(var t=0,a=0,n=this.state.kifu,r=I.a.cloneDeep(this.state.start_pos),i=I.a.cloneDeep(this.state.start_black_piece),c=I.a.cloneDeep(this.state.start_white_piece),s=o.UNCLICKED,l=o.UNCLICKED,u=!0;t<e;){var p=n[a];if(s!==o.UNCLICKED)if(s<2*o.WHITE){var E=Math.floor((p-2*o.WHITE)/o.LENGTH),h=(p-2*o.WHITE)%o.LENGTH;u?(--i[s],r[E][h]=Y(s,u)):(--c[s-o.WHITE],r[E][h]=Y(s-o.WHITE,u)),s=o.UNCLICKED,l=p,u=!u,++t,++a}else{var _=!1;p>=o.LENGTH*o.LENGTH+2*o.WHITE&&(_=!0,p-=o.LENGTH*o.LENGTH);var m=Math.floor((p-2*o.WHITE)/o.LENGTH),v=(p-2*o.WHITE)%o.LENGTH,f=Math.floor((s-2*o.WHITE)/o.LENGTH),d=(s-2*o.WHITE)%o.LENGTH,T=r[m][v];r[m][v]=r[f][d],r[f][d]=new k;var H=T.piece_num();H!==o.MT&&(H>o.WHITE&&(H-=o.MT/2),u?++i[H]:++c[H]),_&&r[m][v].promote(),s=o.UNCLICKED,l=p,u=!u,++t,++a}else s=n[a],++a}this.setState({current_pos:r,current_black_piece:i,current_white_piece:c,final_piece:l,moves_sub:e,turn:u})}},{key:"render",value:function(){var e=this,t="game-info space";this.state.is_black||(t+=" white");var a=this.state.moves_sub,n=this.state.is_black?"\u25b3".concat(this.state.white_name,"\u3000\u25b2").concat(this.state.black_name):"\u25b2".concat(this.state.black_name,"\u3000\u25b3").concat(this.state.white_name),i=-1===this.state.moves&&a>0?r.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a-10)}},r.a.createElement(B.a,{fontSize:"large"})):r.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a-10)}},r.a.createElement(B.a,{fontSize:"large"})),c=-1===this.state.moves&&a>0?r.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a-1)}},r.a.createElement(U.a,{fontSize:"large"})):r.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a-1)}},r.a.createElement(U.a,{fontSize:"large"})),s=-1===this.state.moves&&a<this.state.moves_max?r.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a+1)}},r.a.createElement(A.a,{fontSize:"large"})):r.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a+1)}},r.a.createElement(A.a,{fontSize:"large"})),o=-1===this.state.moves&&a<this.state.moves_max?r.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a+10)}},r.a.createElement(R.a,{fontSize:"large"})):r.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a+10)}},r.a.createElement(R.a,{fontSize:"large"}));return r.a.createElement("div",{className:"game-info"},r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"center bold"},n),r.a.createElement("div",{className:"center"},i,"\xa0",c,"\xa0",a,"\u624b\u76ee \xa0",s,"\xa0",o),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"game-info-white white"},r.a.createElement("div",null,"\u25b3"),r.a.createElement(w,{squares:this.state.current_white_piece,clicked_piece:this.state.clicked_piece,is_black:!1,turn:this.state.turn,onClick:function(t){return e.handleClick(t)}})),r.a.createElement("div",{className:"game-board"},r.a.createElement(G,{squares:this.state.current_pos,onClick:function(t){return e.handleClick(t)},clicked_piece:this.state.clicked_piece,control_piece:this.state.control_piece,final_piece:this.state.final_piece})),r.a.createElement("div",{className:"game-info-black"},r.a.createElement("div",null,"\u25b2"),r.a.createElement(w,{squares:this.state.current_black_piece,clicked_piece:this.state.clicked_piece,is_black:!0,turn:this.state.turn,onClick:function(t){return e.handleClick(t)}})))),r.a.createElement(g.a,{className:"status",variant:"contained",color:"primary",onClick:function(){return e.rotate()}},"\u53cd\u8ee2"),"\xa0",r.a.createElement(g.a,{className:"status",variant:"contained",color:"secondary",onClick:function(){return e.resign()}},"\u6295\u4e86"),r.a.createElement(P,{title:"\u6210\u308a\u307e\u3059\u304b\uff1f",message:"",open:this.state.promotion,handleYes:function(){return e.handlePromotion(!0)},handleNo:function(){return e.handlePromotion(!1)}}),r.a.createElement(P,{title:"\u6295\u4e86\u3057\u307e\u3059\u304b\uff1f",message:"",open:this.state.resign,handleYes:function(){return e.handleResign(!0)},handleNo:function(){return e.handleResign(!1)}}),r.a.createElement(D,{title:"\u307e\u3067".concat(a,"\u624b\u306b\u3066").concat(this.state.turn?this.state.white_name:this.state.black_name,"\u306e\u52dd\u3061\u3067\u3059\uff01"),message:"",open:this.state.result,handleClose:this.handleResultClose}))}}]),t}(r.a.Component);c.a.render(r.a.createElement(te,{start_pos:z(),start_black_piece:J(),start_white_piece:J(),current_pos:z(),current_black_piece:J(),current_white_piece:J(),control_piece:F(),kifu:[],turn:!0,moves:0,moves_sub:0,moves_max:0,clicked_piece:o.UNCLICKED,final_piece:o.UNCLICKED,black_name:"\u5148\u624b",white_name:"\u5f8c\u624b",is_black:!0,moved_piece:o.UNCLICKED,promotion:!1,resign:!1,result:!1}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.46428169.chunk.js.map